<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGL - Configurações</title>
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#003366">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <header>
        <h1>Sistema de Gestão de Lubrificação</h1>
        <nav class="main-nav">
            <a href="../index.html" class="nav-link">Buscador</a>
            <a href="calculadora.html" class="nav-link">Calculadora VG</a>
            <a href="../plano.html" class="nav-link">Plano de Lubrificação</a>
            <a href="mistura.html" class="nav-link">Calculador de Mistura</a>
            <a href="configuracoes.html" class="nav-link active">Configurações</a>
        </nav>
    </header>

    <div class="container">
        <main>
            <section class="settings-section">
                <h2><i class="fas fa-cogs"></i> Gestão de Dados da Aplicação</h2>
                <p class="section-description">Faça o backup dos seus dados salvos, importe um backup existente ou apague todas as informações locais.</p>

                <div class="settings-card">
                    <h3><i class="fas fa-download"></i> Exportar Dados (Backup)</h3>
                    <p>Crie um ficheiro de backup único (`.json`) contendo todos os seus projetos e planos de lubrificação salvos. Guarde este ficheiro num local seguro.</p>
                    <button id="export-data-btn" class="main-button"><i class="fas fa-download"></i> Exportar Todos os Dados</button>
                </div>

                <div class="settings-card">
                    <h3><i class="fas fa-upload"></i> Importar Dados</h3>
                    <p>Carregue um ficheiro de backup (`.json`) previamente exportado para restaurar os seus dados. Atenção: isto irá sobrepor quaisquer dados existentes com o mesmo nome.</p>
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                    <button id="import-data-btn" class="secondary-button"><i class="fas fa-upload"></i> Escolher Ficheiro para Importar</button>
                </div>

                <div class="settings-card danger-zone">
                    <h3><i class="fas fa-exclamation-triangle"></i> Zona de Perigo</h3>
                    <p>Esta ação é irreversível. Irá apagar permanentemente todos os projetos da calculadora e todos os itens do plano de lubrificação guardados neste navegador.</p>
                    <button id="clear-data-btn" class="delete-button"><i class="fas fa-trash-alt"></i> Apagar Todos os Dados</button>
                </div>

            </section>
        </main>
    </div>
    
    <script type="module" src="../js/configuracoes.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('../sw.js').then(reg => console.log('Service worker registado.', reg));
            });
        }
    </script>
</body>
</html>
