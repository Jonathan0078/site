<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora Avançada de Dissipação Térmica em Mancais</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Calculadora de Dissipação Térmica em Mancais</h1>
      <p>Estime e analise a dissipação de calor em seus sistemas de mancais.</p>
    </div>
    <!-- Menu movido para o cabeçalho -->
    <div class="menu-container">
      <button id="abrir-menu-btn" class="menu-btn">Menu</button>
      <div id="menu-popup" class="menu-popup">
        <ul>
          <li><button id="nav-calculadora">Calculadora Principal</button></li>
          <li><button id="nav-multiplos">Múltiplos Mancais</button></li>
          <li><button id="nav-historico">Histórico de Cálculos</button></li>
          <li><button id="limpar-historico-btn">Limpar Histórico</button></li>
        </ul>
      </div>
    </div>
  </header>

  <div class="main-container">
    
    <!-- Seção da Calculadora Principal -->
    <div id="view-calculadora" class="view-container">
      <div class="calculator-container">
        <h2>Dados do Mancal</h2>
        <form id="form-mancal">
          <div class="input-group">
            <label for="tipo-mancal">Tipo de Mancal:</label>
            <select id="tipo-mancal">
              <option value="Rolamento">Rolamento</option>
              <option value="Bucha">Bucha</option>
            </select>
          </div>
          <div class="input-group">
            <label for="carga">Carga (N):</label>
            <input type="number" id="carga" required>
          </div>
          <div class="input-group">
            <label for="velocidade">Velocidade (rpm):</label>
            <input type="number" id="velocidade" required>
          </div>
          <div class="input-group">
            <label for="temp-oper">Temperatura Operação (°C):</label>
            <input type="number" id="temp-oper" required>
          </div>
          <div class="input-group">
            <label for="temp-amb">Temperatura Ambiente (°C):</label>
            <input type="number" id="temp-amb" required>
          </div>
          <div class="input-group">
            <label for="tipo-lubrificacao">Tipo de Lubrificação:</label>
            <select id="tipo-lubrificacao">
              <option value="Óleo">Óleo</option>
              <option value="Graxa">Graxa</option>
            </select>
          </div>
          <div class="input-group">
            <label for="diametro-eixo">Diâmetro do Eixo (mm):</label>
            <input type="number" id="diametro-eixo" required>
          </div>
          <div class="input-group">
            <label for="tempo-operacao">Tempo de Operação (horas):</label>
            <input type="number" id="tempo-operacao" min="1" value="1" required>
          </div>
          <button type="submit" id="calcular-btn">
            <span class="btn-text">Calcular Dissipação</span>
            <span class="spinner hidden"></span>
          </button>
        </form>
      </div>

      <div id="resultado-container" class="resultado-container hidden">
        <h2>Resultado</h2>
        <div id="resultado-display"></div>
        <p class="aviso-dados">Consulte o manual do fabricante para limites específicos do seu mancal.</p>
        <div class="export-container">
          <button id="export-pdf-btn">Exportar PDF</button>
          <button id="export-csv-btn">Exportar CSV</button>
        </div>
      </div>
      
      <div id="grafico-whatif-container" class="grafico-container hidden">
          <h2>Análise de Sensibilidade (Dissipação vs. Velocidade)</h2>
          <canvas id="grafico-whatif"></canvas>
      </div>
    </div>

    <!-- Seção de Histórico -->
    <div id="view-historico" class="view-container hidden">
      <div class="historico-container">
        <h2>Histórico de Cálculos</h2>
        <p class="info-text">Clique em um item para recarregar os dados no formulário.</p>
        <ul id="historico-list"></ul>
      </div>
    </div>

    <!-- Seção de Múltiplos Mancais -->
    <div id="view-multiplos" class="view-container hidden">
      <div class="multiplos-mancais-container">
        <h2>Análise de Múltiplos Mancais</h2>
        <p class="info-text">Adicione mancais para comparar a dissipação de calor e ver o total.</p>
        <div id="mancais-list"></div>
        <button id="adicionar-mancal-btn">Adicionar Mancal</button>
        <div id="resultado-multiplos" class="resultado-multiplos"></div>
        <div class="grafico-container">
            <canvas id="grafico-multiplos"></canvas>
        </div>
      </div>
    </div>
    
    <!-- Container de Erro Global -->
    <div id="erro-container" class="erro-container hidden"></div>
  </div>

  <!-- Bibliotecas JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</body>
</html>
