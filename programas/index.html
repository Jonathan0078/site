<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central de Ferramentas de Engenharia</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <header>
        <h1>Central de Ferramentas de Engenharia</h1>
        <p>Selecione uma ferramenta abaixo para começar</p>
    </header>

    <main class="main-container">
        
        <nav class="tool-list">
            <ul>
                <li>
                    <a href="torque parafusos/index.html">
                        <div class="tool-icon"><i class="fas fa-wrench"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora de Torque de Parafusos</h2>
                            <p>Calcule o torque de aperto para parafusos métricos e em polegadas.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                <li>
                    <a href="relacao engrenagens/index.html">
                        <div class="tool-icon"><i class="fas fa-cogs"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora de Relação de Engrenagens</h2>
                            <p>Visualize a relação de transmissão e RPM com uma animação interativa.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                
                <li>
                    <a href="calculadora quantidade e frequência de graxa/index.html">
                        <div class="tool-icon"><i class="fas fa-oil-can"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora GreasePRO</h2>
                            <p>Versão local para cálculos de quantidade e frequência de graxa.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>

                <li>
                    <a href="#" id="greasePro4WakeUpBtn" class="wake-up-button" data-url="https://api-pgp1.onrender.com/"> 
                        <div class="tool-icon" style="color: #28a745;"><i class="fas fa-server"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora GreasePRO 4.0 (c/ Servidor)</h2>
                            <p>Versão avançada com servidor para cálculos mais precisos e recomendações.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                
                <li>
                    <a href="calculadora de montagem de rolamentos/index.html">
                        <div class="tool-icon"><i class="fas fa-cog"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora de Montagem de Rolamentos</h2>
                            <p>Calcule a folga e tolerância na montagem de rolamentos.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>

                <li>
                    <a href="calculadora polias/index.html">
                        <div class="tool-icon"><i class="fas fa-bullseye"></i></div>
                        <div class="tool-info">
                            <h2>Dimensionamento de Polias</h2>
                            <p>Calcule a relação de transmissão, velocidade e comprimento de correias.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                 <li>
                    <a href="Calculadora para Correias Transportadoras/index.html">
                        <div class="tool-icon">
                            <span class="fa-stack">
                                <i class="fas fa-conveyor-belt fa-stack-2x"></i>
                                <i class="fas fa-calculator fa-stack-1x" style="color: rgba(0, 0, 0, 0.6);"></i>
                            </span>
                        </div>
                        <div class="tool-info">
                            <h2>Calculadora para Correias Transportadoras</h2>
                            <p>Realize cálculos de dimensionamento para transportadores de correia.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
            </ul>
        </nav>

    </main>

    <script>
        // O código só roda depois que toda a página HTML foi carregada.
        document.addEventListener('DOMContentLoaded', () => {

            // Seleciona TODOS os botões que precisam "acordar" um servidor.
            const wakeUpButtons = document.querySelectorAll('.wake-up-button');

            // Se nenhum botão for encontrado, não faz nada.
            if (wakeUpButtons.length === 0) {
                return;
            }

            // Para cada botão encontrado, adiciona a funcionalidade.
            wakeUpButtons.forEach(button => {
                button.addEventListener('click', async (event) => {
                    // Previne a ação padrão do link (que seria recarregar a página)
                    event.preventDefault();

                    // Pega a URL do servidor do atributo 'data-url' do botão que foi clicado
                    const targetUrl = button.dataset.url;
                    if (!targetUrl || targetUrl === "") {
                        alert("Erro de configuração: o URL de destino para este botão não foi encontrado.");
                        return;
                    }

                    // Seleciona os elementos internos do botão para dar feedback visual
                    const infoParagraph = button.querySelector('.tool-info p');
                    const arrowIcon = button.querySelector('.tool-arrow i');
                    
                    // Impede cliques múltiplos e dá feedback visual
                    button.style.pointerEvents = 'none';
                    button.style.opacity = '0.7';
                    button.style.cursor = 'wait';

                    if (infoParagraph) {
                        infoParagraph.textContent = 'Inicializando o servidor, por favor aguarde...';
                    }
                    if (arrowIcon) {
                        // Troca o ícone de seta por um ícone de "spinner" (usando Font Awesome)
                        arrowIcon.className = 'fas fa-spinner fa-spin';
                    }

                    try {
                        // Envia o "ping" para acordar o servidor específico daquele botão.
                        await fetch(targetUrl, { method: 'GET', mode: 'no-cors' });
                    
                    } catch (error) {
                        // Erros são esperados e normais ao usar 'no-cors', então nós os ignoramos e continuamos.
                    } finally {
                        // Após o ping, redireciona o utilizador para a calculadora.
                        window.location.href = targetUrl;
                    }
                });
            });
        });
    </script>

</body>
</html>
