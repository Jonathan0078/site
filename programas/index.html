<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central de Ferramentas de Engenharia</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#003366">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <header>
        <h1>Central de Ferramentas de Engenharia</h1>
        <p>Selecione uma ferramenta abaixo para começar</p>
    </header>

    <main class="main-container">
        
        <nav class="tool-list">
            <ul>
                <li>
                    <a href="LMS-SOFTWARE/index.html">
                        <div class="tool-icon"><i class="fas fa-wrench"></i></div>
                        <div class="tool-info">
                            <h2>Lubrication Management System</h2>
                            <p>Em fase de testes.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                <li>
                    <a href="torque parafusos/index.html">
                        <div class="tool-icon"><i class="fas fa-wrench"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora de Torque de Parafusos</h2>
                            <p>Determine o torque de aperto ideal para parafusos com roscas métricas (ISO) ou em polegadas (UNC/UNF), considerando a classe de resistência para garantir a integridade da junta.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                 <li>
                    <a href="calculadora_rolamentos/index.html">
                        <div class="tool-icon"><i class="fas fa-cogs"></i></div>
                        <div class="tool-info">
                            <h2>EspecCalc Rolamentos</h2>
                            <p>teste</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                <li>
                    <a href="consulta_mancais/index.html">
                        <div class="tool-icon"><i class="fas fa-wrench"></i></div>
                        <div class="tool-info">
                            <h2>Doutor Mancal</h2>
                            <p>Em fase de testes.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                <li>
                    <a href="relacao engrenagens/index.html">
                        <div class="tool-icon"><i class="fas fa-cogs"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora de Relação de Engrenagens</h2>
                            <p>Calcule a relação de transmissão, a velocidade de saída (RPM) e a alteração de torque em um sistema de engrenagens, inserindo o número de dentes da motora e da movida.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                
                <li>
                    <a href="calculadora quantidade e frequência de graxa/index.html">
                        <div class="tool-icon"><i class="fas fa-oil-can"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora GreasePRO</h2>
                            <p>Estime a quantidade inicial e os intervalos de relubrificação para rolamentos. Ideal para estabelecer um plano de manutenção básico, funcionando totalmente offline.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
                
                <li>
                    <a href="calculadora de montagem de rolamentos/index.html">
                        <div class="tool-icon"><i class="fas fa-cog"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora de Montagem de Rolamentos</h2>
                            <p>Calcule a folga interna residual de rolamentos após a montagem, auxiliando na determinação do ajuste correto e na prevenção de pré-carga excessiva para garantir a vida útil.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>

                <li>
                    <a href="calculadora polias/index.html">
                        <div class="tool-icon"><i class="fas fa-bullseye"></i></div>
                        <div class="tool-info">
                            <h2>Dimensionamento de Polias</h2>
                            <p>Projete sistemas de transmissão por correias, calculando a relação de transmissão, velocidade de saída e o comprimento primitivo da correia com base nos diâmetros das polias.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
               <li>
                    <a href="Calculadora para Correias Transportadoras/index.html">
                        <div class="tool-icon"><i class="fas fa-tape"></i></div>
                        <div class="tool-info">
                            <h2>Calculadora para Correias Transportadoras</h2>
                            <p>Calcule parâmetros essenciais para transportadores, como a velocidade da esteira, o comprimento total da correia e a rotação necessária no tambor de acionamento.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
               <li>
                    <a href="conversor de unidades/index.html">
                        <div class="tool-icon"><i class="fas fa-calculator"></i></div>
                        <div class="tool-info">
                            <h2>Conversor de Unidades</h2>
                            <p>Realize conversões entre unidades do Sistema Internacional (SI) e Imperial, cobrindo grandezas como pressão (Pa, bar, psi), comprimento, área, volume e massa.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>

            <li>
                    <a href="Conversor de Escalas Lineares/index.html">
                        <div class="tool-icon"><i class="fas fa-calculator"></i></div>
                        <div class="tool-info">
                            <h2>Conversor de Escalas Linheares</h2>
                            <p>Conversor de escalas preciso para automação e instrumentação.</p>
                        </div>
                        <div class="tool-arrow"><i class="fas fa-chevron-right"></i></div>
                    </a>
                </li>
            </ul>
        </nav>

    </main>

    <script>
        // O código só roda depois que toda a página HTML foi carregada.
        document.addEventListener('DOMContentLoaded', () => {

            // Seleciona TODOS os botões que precisam "acordar" um servidor.
            const wakeUpButtons = document.querySelectorAll('.wake-up-button');

            // Se nenhum botão for encontrado, não faz nada.
            if (wakeUpButtons.length === 0) {
                return;
            }

            // Para cada botão encontrado, adiciona a funcionalidade.
            wakeUpButtons.forEach(button => {
                button.addEventListener('click', async (event) => {
                    // Previne a ação padrão do link (que seria recarregar a página)
                    event.preventDefault();

                    // Pega a URL do servidor do atributo 'data-url' do botão que foi clicado
                    const targetUrl = button.dataset.url;
                    if (!targetUrl || targetUrl === "") {
                        alert("Erro de configuração: o URL de destino para este botão não foi encontrado.");
                        return;
                    }

                    // Seleciona os elementos internos do botão para dar feedback visual
                    const infoParagraph = button.querySelector('.tool-info p');
                    const arrowIcon = button.querySelector('.tool-arrow i');
                    
                    // Impede cliques múltiplos e dá feedback visual
                    button.style.pointerEvents = 'none';
                    button.style.opacity = '0.7';
                    button.style.cursor = 'wait';

                    if (infoParagraph) {
                        infoParagraph.textContent = 'Inicializando o servidor, por favor aguarde...';
                    }
                    if (arrowIcon) {
                        // Troca o ícone de seta por um ícone de "spinner" (usando Font Awesome)
                        arrowIcon.className = 'fas fa-spinner fa-spin';
                    }

                    try {
                        // Envia o "ping" para acordar o servidor específico daquele botão.
                        await fetch(targetUrl, { method: 'GET', mode: 'no-cors' });
                    
                    } catch (error) {
                        // Erros são esperados e normais ao usar 'no-cors', então nós os ignoramos e continuamos.
                    } finally {
                        // Após o ping, redireciona o utilizador para a calculadora.
                        window.location.href = targetUrl;
                    }
                });
            });
        });
    </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // O caminho para o sw.js deve ser absoluto a partir da raiz do domínio
                navigator.serviceWorker.register('sw.js').then(registration => {
                    console.log('ServiceWorker registado com sucesso para todo o site!');
                }, err => {
                    console.log('Registo do ServiceWorker falhou: ', err);
                });
            });
        }
    </script>

</body>
</html>
